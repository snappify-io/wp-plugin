(()=>{"use strict";const e=window.React,t=window.wp.blocks,r=window.wp.components,n=window.wp.blockEditor,l=window.wp.element,a=JSON.parse('{"apiVersion":3,"title":"Snappify","name":"snappify/block","category":"embed","editorScript":"file:./build/index.js"}'),i=e=>{let t={html:"<div>No snap url provided</div>"};if(e)try{t=JSON.parse(e)}catch{t=e}return t};(0,t.registerBlockType)("snappify/block",{...a,icon:{src:(0,e.createElement)("svg",{width:"50",height:"40",viewBox:"0 0 951 754",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("rect",{width:"951",height:"754",rx:"60",fill:"#252525"}),(0,e.createElement)("path",{d:"M0 60C0 26.8629 26.8629 0 60 0H891C924.137 0 951 26.8629 951 60V215H0V60Z",fill:"#323232"}),(0,e.createElement)("circle",{cx:"118",cy:"114",r:"39",fill:"#FF5F57"}),(0,e.createElement)("circle",{cx:"234",cy:"114",r:"39",fill:"#FEBC2E"}),(0,e.createElement)("circle",{cx:"352",cy:"114",r:"39",fill:"#28C840"}),(0,e.createElement)("path",{d:"M250.715 421.158L391.151 344.639C395.815 342.097 401.5 345.474 401.5 350.786V382.956C401.5 386.672 399.439 390.082 396.148 391.81L304.939 439.695C303.499 440.451 303.515 442.518 304.967 443.251L396.008 489.226C399.376 490.927 401.5 494.379 401.5 498.153V530.347C401.5 535.628 395.875 539.007 391.212 536.526L250.803 461.821C247.539 460.085 245.5 456.69 245.5 452.993V429.939C245.5 426.278 247.501 422.91 250.715 421.158Z",fill:"white"}),(0,e.createElement)("path",{d:"M701.785 421.158L561.349 344.639C556.685 342.097 551 345.474 551 350.786V382.956C551 386.672 553.061 390.082 556.352 391.81L647.561 439.695C649.001 440.451 648.985 442.518 647.533 443.251L556.492 489.226C553.124 490.927 551 494.379 551 498.153V530.347C551 535.628 556.625 539.007 561.288 536.526L701.697 461.821C704.961 460.085 707 456.69 707 452.993V429.939C707 426.278 704.999 422.91 701.785 421.158Z",fill:"white"}),(0,e.createElement)("script",{xmlns:"",id:"bw-fido2-page-script"}))},attributes:{url:{type:"string",default:""},snapData:{type:"string",default:""}},edit:({attributes:t,setAttributes:a})=>{const c=(0,n.useBlockProps)(),[s,o]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{if(t.url){o(!0);try{const e=await fetch(`/wp-json/snappify/fetch/?snap=${t.url}`);if(!e.ok)throw new Error("Error fetching snap");const r=await e.json();a({snapData:r})}catch(e){console.error("Fetch error:",e),a({snapData:"Error fetching data"})}o(!1)}else a({snapData:""})})()}),[t.url]);const p=i(t.snapData);return(0,e.createElement)("div",{...c},(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(r.TextControl,{label:"Public Snap URL",value:t.url,onChange:e=>a({url:e})})),(0,e.createElement)("div",null,s?(0,e.createElement)(r.Spinner,null):(0,e.createElement)("div",{dangerouslySetInnerHTML:{__html:p.html}})))},save:({attributes:t})=>{const r=i(t.snapData);return(0,e.createElement)("div",{dangerouslySetInnerHTML:{__html:r.html}})}})})();